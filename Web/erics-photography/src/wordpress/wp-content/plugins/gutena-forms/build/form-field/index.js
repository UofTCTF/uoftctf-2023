(()=>{"use strict";const e=window.wp.element,t=window.wp.blocks,l=window.wp.i18n,a=window.wp.blockEditor,n=e=>null==e||""==e,r=window.wp.data,i=window.wp.components,o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"gutena/form-field","version":"1.0.0","title":"Form field","parent":["gutena/forms"],"category":"gutena","icon":"feedback","description":"Form field","attributes":{"nameAttr":{"type":"string","default":"input_1"},"fieldName":{"type":"string","default":"Name"},"fieldClasses":{"type":"string","default":""},"fieldType":{"type":"string","default":"text"},"isRequired":{"type":"boolean","default":false},"placeholder":{"type":"string","default":""},"defaultValue":{"type":"string","default":""},"autocomplete":{"type":"boolean","default":false},"autoCapitalize":{"type":"boolean","default":false},"textAreaRows":{"type":"number","default":5},"maxlength":{"type":"number","default":""},"selectOptions":{"type":"array","default":["select","Big","Medium","Small"]},"optionsInline":{"type":"boolean","default":false},"multiSelect":{"type":"boolean","default":false},"errorRequiredMsg":{"type":"string","default":"Field is required"},"errorInvalidInputMsg":{"type":"string","default":"Input is not valid"},"description":{"type":"string","default":""},"settings":{"type":"object","default":{}}},"supports":{"__experimentalSettings":true,"align":["wide","full"],"color":{"background":true,"text":true},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":true,"radius":true,"style":true,"width":true}},"spacing":{"margin":true,"padding":true,"blockGap":true},"html":false},"textdomain":"gutena-forms","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,t.registerBlockType)(o,{icon:()=>(0,e.createElement)(i.Icon,{icon:()=>(0,e.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.createElement)("rect",{x:"2",y:"4",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"2",y:"11",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"14",y:"4",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"14",y:"11",width:"8",height:"2",fill:"#0EA489"}),(0,e.createElement)("rect",{x:"2",y:"18",width:"20",height:"2",fill:"#0EA489"}))}),edit:function(t){let{className:o,attributes:s,setAttributes:u,isSelected:d,clientId:c}=t;const{nameAttr:m,fieldName:p,fieldClasses:f,fieldType:g,isRequired:h,placeholder:w,defaultValue:y,autocomplete:x,autoCapitalize:E,textAreaRows:_,maxlength:b,selectOptions:C,optionsInline:v,multiSelect:A,errorRequiredMsg:k,errorInvalidInputMsg:R,description:q,settings:S,style:T}=s,[N,I]=(0,e.useState)(C[0]),B=(0,r.useSelect)((e=>{let t=e(a.store).getAdjacentBlockClientId(c,-1);return n(t)&&(t=e(a.store).getAdjacentBlockClientId(c,1)),t}),[]),F=(0,r.useSelect)((e=>{if(n(B))return null;let t=e(a.store).getBlockAttributes(B);return n(t)||n(t.content)?"":t.content.replace(/(<([^>]+)>)|\*/gi,"").trim()}),[B]),{updateBlockAttributes:P}=(0,r.useDispatch)(a.store),[M,O]=(0,e.useState)(!1);(0,e.useEffect)((()=>{"input_1"!=m&&""!=m||O(!0)}),[]);const j=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!n(e)){if(u({fieldName:e}),M){let t=e.toLowerCase().replace(/ /g,"_");u({nameAttr:t})}t&&!n(B)&&P(B,{content:e})}};(0,e.useEffect)((()=>{let e=!0;return e&&j(F),()=>{e=!1}}),[F]),(0,e.useEffect)((()=>{let e=!0;return e&&u({fieldClasses:`gutena-forms-field ${g}-field ${h?"required-field":""}`}),()=>{e=!1}}),[g,h]);const $=(0,a.useBlockProps)({className:`gutena-forms-${g}-field`});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(i.PanelBody,{title:"Form Field",initialOpen:!0},(0,e.createElement)(i.PanelRow,null,(0,e.createElement)(i.SelectControl,{label:"Field Type",value:g,options:[{label:"Text",value:"text"},{label:"TextArea",value:"textarea"},{label:"Email",value:"email"},{label:"Select",value:"select"}],onChange:e=>u({fieldType:e}),help:(0,l.__)("Select appropriate field type for input","gutena-forms"),__nextHasNoMarginBottom:!0})),"select"!==g&&(0,e.createElement)(i.RangeControl,{label:(0,l.__)("Maxlength","gutena-forms"),value:b,onChange:e=>u({maxlength:e}),min:0,max:500,step:25}),"textarea"===g&&(0,e.createElement)(i.RangeControl,{label:(0,l.__)("Textarea Rows","gutena-forms"),value:_,onChange:e=>u({textAreaRows:e}),min:2,max:20,step:1}),"select"===g&&(0,e.createElement)(i.FormTokenField,{label:(0,l.__)("Options","gutena-forms"),value:C,suggestions:C,onChange:e=>u({selectOptions:e})}),(0,e.createElement)(i.PanelRow,null,(0,e.createElement)(i.TextControl,{label:(0,l.__)("Field Name","gutena-forms"),value:p,onChange:e=>j(e,!0)})),(0,e.createElement)(i.PanelRow,null,(0,e.createElement)(i.TextControl,{label:(0,l.__)("Field Name Attribute","gutena-forms"),help:(0,l.__)("Contains only letters, numbers, and underscore","gutena-forms"),value:m,onChange:e=>u({nameAttr:e.toLowerCase().replace(/ /g,"_")})})),(0,e.createElement)(i.PanelRow,null,(0,e.createElement)(i.TextControl,{label:(0,l.__)("Placeholder","gutena-forms"),value:w,onChange:e=>u({placeholder:e})})),(0,e.createElement)(i.PanelRow,null,(0,e.createElement)(i.ToggleControl,{label:(0,l.__)("Required","gutena-forms"),help:h?(0,l.__)("Toggle to make input field not required","gutena-forms"):(0,l.__)("Toggle to make input field required","gutena-forms"),checked:h,onChange:e=>u({isRequired:e})})))),(0,e.createElement)("div",$,g.length>0?0<=["text","email","number","hidden","tel","url"].indexOf(g)?(0,e.createElement)("input",{type:g,className:f,placeholder:w||(0,l.__)("Placeholder…"),required:h?"required":""}):"textarea"===g?(0,e.createElement)("textarea",{className:f,placeholder:w||(0,l.__)("Placeholder…"),required:h?"required":"",rows:_}):"select"===g?(0,e.createElement)("select",{className:f,value:N,onChange:e=>I(e.target.value),required:h?"required":""},C.map(((t,l)=>(0,e.createElement)("option",{key:l,value:t},t)))):void 0:""))}})})();