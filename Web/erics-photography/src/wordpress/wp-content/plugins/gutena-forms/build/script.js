window.onload=()=>{const e=e=>"undefined"===e||null===e||""==e,r=(e,r)=>(" "+e.className+" ").indexOf(" "+r+" ")>-1,o=(e,r)=>{let o=[];for(;e.parentNode!==document.body;)e.matches(r)&&o.push(e),e=e.parentNode;return o},t=o=>{if(e(o))return console.log("No input fields found"),!1;let t=o.value,s=r(o,"required-field"),l=o.parentNode.parentNode.parentNode;if(e(l))return console.log("field_group not defined"),!1;let n=l.querySelector(".gutena-forms-field-error-msg");if(e(n))return console.log("errorHTML not defined"),!1;if(l.classList.remove("display-error"),s&&(e(t)||r(o,"select-field")&&"select"===t)){l.classList.add("display-error");let e=gutenaFormsBlock.required_msg;return r(o,"select-field")&&(e=gutenaFormsBlock.required_msg_select),n.innerHTML=e,!1}return!(!e(t)&&r(o,"email-field")&&(i=t,!i.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))&&(l.classList.add("display-error"),n.innerHTML=gutenaFormsBlock.invalid_email_msg,1));var i};(()=>{let s=document.querySelectorAll(".wp-block-gutena-forms .gutena-forms-submit-button");if(0<s.length)for(let l=0;l<s.length;l++)s[l].addEventListener("click",(function(n){n.preventDefault();let i=o(this,".wp-block-gutena-forms");if(void 0===i)return void console.log("Form not defined");i=i[0];let d=i.querySelectorAll(".gutena-forms-field");if(0===d.length)return void console.log("No input fields found");let a=!0,c=d[0];for(let e=0;e<d.length;e++)!1===t(d[e])&&(!0===a&&(c=d[e]),a=!1);if(!1===a)return i.classList.add("display-error-message"),void c.scrollIntoView({behavior:"smooth"});i.classList.add("form-progress");let u=this.querySelector(".wp-block-button__link"),m=u.innerHTML;this.disabled=!0,u.innerHTML='<div class="gutena-forms-btn-progress"><div></div><div></div><div></div><div></div></div>';let f=new FormData(i);f.append("nonce",gutenaFormsBlock.nonce),f.append("action",gutenaFormsBlock.submit_action),i.classList.remove("display-error-message"),i.classList.remove("display-success-message"),fetch(gutenaFormsBlock.ajax_url,{method:"POST",credentials:"same-origin",body:f}).then((e=>e.json())).then((o=>{if(s[l].disabled=!1,u.innerHTML=m,i.classList.remove("form-progress"),e(o)||"error"!==o.status){if(i.reset(),i.classList.add("display-success-message"),r(i,"hide-form-after-submit")&&i.classList.add("hide-form-now"),r(i,"after_submit_redirect_url")){let r=i.querySelector('input[name="redirect_url"]');(e(r)||0===r.length)&&console.log("redirect_url not found"),r=r.value,e(r)?console.log("redirect_url",r):setTimeout((()=>{location.href=r}),2e3)}}else{i.classList.add("display-error-message");let r=i.querySelector(".wp-block-gutena-form-error-msg .gutena-forms-error-text");(e(r)||0===r.length)&&console.log("errorMsgElement not found"),r.innerHTML=o.message,console.log("Form Message",o)}}))}))})(),(()=>{let e=document.querySelectorAll(".wp-block-gutena-forms .gutena-forms-field");if(0<e.length)for(let r=0;r<e.length;r++)e[r].addEventListener("input",(function(){t(e[r])}))})()};